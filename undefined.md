# 연관성 분석

## 1. 연관성 분석이란 <a id="1"></a>

* 연관성 분석이란 **데이터 안에 존재하는 항목간의 연관성 규칙\(Association rule\)을 발견하는 과정**을 말한다.
* 손님의 장바구니에 들어있는 품목간의 관계를 알아본다는 의미에서 **장바구니 분석**\(Market Basket Analysis\)이라고도 한다.

### 1.1 예를 들어 <a id="1-1"></a>

* 특정한 상품을 구입한 고객이 어떤 부류에 속하는지, 그들이 왜 그런 구매를 했는지를 알기 위해 고객들이 구매한 상품에 대한 자료를 분석하는 것을 말한다.
* 이러한 분석을 통해 효율적인 매장진열, 패키지 상품의 개발, 교차판매전략 구사, 기획상품의 결정 등에 응용할 수 있다.

### 1.2 연관성 분석의 응용 <a id="1-2"></a>

* 백화점이나 호텔에서 고객들이 다음에 이용할 가능성이 높은 서비스를 미리 예측할 수 있다.
* 신용카드, 대출 등의 은행서비스 내역으로부터 특정한 서비스를 받을 가능성이 높은 고객을 탐지할 수 있다.
* 의료보험금이나 상해보험금 청구가 특이한 경우, 보험 사기의 징조가 될 수 있고 추가적인 조사가 필용함을 알 수 있다.
* 환자의 의무기록에서 여러 치료가 같이 이루어진 경우 합병증 발생의 징후 탐지가 가능하다.

## 2. 연관성 규칙 <a id="2"></a>

**연관성 규칙**: 상품을 구매하거나 서비스를 받는 등의 일련의 거래나 사건들의 연관성에 대한 규칙.

### 2.1 예를 들어 <a id="2-1"></a>

1. 목요일 식료품 가게를 찾는 고객은 아기 기저귀와 맥주를 함께 구입하는 경향이 있다.
   * 유용한 규칙이다. 이를 이용해 식료품 가게의 매출을 증가시킬 수 있다.
2. 한 회사의 전자제품을 구매하던 고객은 전자제품을 살 때 같은 회사의 제품을 사는 경향이 있다.
   * 자명한 규칙이다. 이러한 발견은 기존의 정보를 재확인하는 데 의미가 있다.
3. 새로 연 건축 자재점에서는 변기덮개가 많이 팔린다.
   * 설명이 불가능한 규칙이며, 좀 더 세밀한 조사가 필요하다.

### 2.2 연관성 규칙의 탐색 및 평가 <a id="2-2"></a>

* 연관성 분석은 하나 이상의 제품이나 서비스를 포함하는 거래 내역을 가지고 시작한다.
* 연관성 분석은 분석 목적상 제조업에서 생성된 제품이나 서비스를 품목\(item\)이라 한다.

### 2.3 동시구매표 <a id="2-3"></a>

| 구분 | 오렌지쥬스 | 식기세척기 | 우유 | 사이다 | 세제 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 오렌지쥬스 | 4 | 1 | 1 | 2 | 2 |
| 식기세척기 | 1 | 2 | 1 | 1 | 0 |
| 우유 | 1 | 1 | 1 | 0 | 0 |
| 사이다 | 2 | 1 | 0 | 3 | 1 |
| 세제 | 2 | 0 | 0 | 1 | 2 |

* 동시구매표는 대칭행렬의 모형을 보인다.
* 동시구매표를 보면, 두 상품이 몇 번이나 함께 팔렸는지 알 수 있다. 예를 들어, 사이다 행과 오렌지 쥬스 열이 교차하는 값을 보면, 두 상품이 두 번 같이 구매되었음을 알 수 있다.
* 동시구매표의 대각선 상의 자료값은 바로 그 품목을 포함하는 총 거래수를 나타낸다. 예를 들면, 오렌지 쥬스는 4번 구매되었다.

### 2.4 연관성 규칙의 조건 <a id="2-4"></a>

* 동시구매표로부터 간단한 "사이다를 구입하는 고객은 오렌지 쥬스를 산다"와 같은 간단한 규칙을 만들 수 있다.
* 두 품목을 함께 산 경우는 총 5번의 구매 중 2번 일어났으며, 사이다를 산 3번의 구매 중 오렌지 쥬스가 2번 구매되었다.
* 연관 규칙은 "If A, then B"와 같은 형식으로 표현된다. 하지만, 모든 "if-then" 규칙이 유용한 것은 아니다.
* 발견된 규칙이 유용하게 사용되기 위해서는 다음의 두 조건을 만족시켜야 한다.
  * **일정 수준 이상의 지지도**: 두 품목이 함께 구매한 경우의 수가 일정 수준 이상이어야 한다.
  * **일정 수준 이상의 신뢰도**: 품목 A를 포함하는 거래 중 품목 B를 구입하는 경우의 수가 일정 수준 이상이어야 한다.

## 3. 지지도, 신뢰도, 향상도 <a id="3"></a>

### 3.1 지지도\(Support\) <a id="3-1-support"></a>

* 두 품목 A와 B의 지지도는 전체 거래 항목 중 항목 A와 항목 B가 동시에 포함되는 거래의 비율을 말한다.
* 즉, 지지도는

​

### 3.2 신뢰도\(Confidence\) <a id="3-2-confidence"></a>

​

#### 3.2.1 지지도, 신뢰도의 적용 <a id="3-2-1"></a>

#### 3.2.2 지지도, 신뢰도 예제 <a id="3-2-2"></a>

### ​ <a id="undefined"></a>

### 3.4 향상도\(Lift\) <a id="3-4-lift"></a>

